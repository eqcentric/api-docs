openapi: 3.0.0
info:
  title: Makini API
  description: Makini API
  version: '0.1'
  contact:
    name: Roman Kinyakin
    email: roman@makini.io
paths:
  /assets:
    get:
      summary: Display assets list
      operationId: AssetSearch
      responses:
        '200':
          $ref: '#/components/responses/AssetResourceCollection'
    parameters: []
  '/assets/{key}':
    get:
      summary: Display the specified resource.
      operationId: AssetGet
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          $ref: '#/components/responses/AssetResourceItem'
    parameters:
      - schema:
          type: string
        name: key
        in: path
        required: true
  /parts:
    get:
      summary: Display part list
      operationId: PartSearch
      responses:
        '200':
          $ref: '#/components/responses/PartResourceCollection'
  '/parts/{key}':
    get:
      summary: Display the specified resource.
      operationId: PartGet
      responses:
        '200':
          $ref: '#/components/responses/PartResourceItem'
  /sites:
    get:
      summary: Display site list
      operationId: SiteSearch
      responses:
        '200':
          $ref: '#/components/responses/SiteResourceCollection'
  '/sites/{key}':
    get:
      summary: Display the specified resource.
      operationId: SiteGet
      responses:
        '200':
          $ref: '#/components/responses/SiteResourceItem'
  /work-orders:
    get:
      summary: Display work orders list
      operationId: WorkOrderSearch
      responses:
        '200':
          $ref: '#/components/responses/WorkOrderResourceCollection'
  '/work-orders/{key}':
    get:
      summary: Display the specified resource.
      operationId: WorkOrderGet
      responses:
        '200':
          $ref: '#/components/responses/WorkOrderResourceItem'
components:
  schemas:
    Asset:
      title: ''
      type: object
      properties:
        key:
          description: Unique asset identifier
          type: string
        siteKey:
          type: string
          description: 'Identifier of site, which asset belongs to'
        parentKey:
          type: string
          description: Identifier of parent asset if any
        vendorKey:
          type: string
          description: 'Identifier of vendor, from which asset was purchased from'
        modelKey:
          type: string
          description: Identifier of asset model
        teamKey:
          type: string
          description: Identifier of team to which asset is assigned to
        documentKeys:
          type: array
          description: List of identifiers of documents related to asset
          items:
            type: string
        name:
          description: Name of asset
          type: string
        code:
          type: string
          description: 'Identifier of asset in end-users internal taxonomy, e. g. SFI Code or SKU'
        description:
          type: string
          description: Description of asset
        notes:
          type: string
          format: text
          description: Notes to asset in end-user's system
        categoryName:
          type: string
          description: Name of category asset is assigned to
        criticality:
          type: string
          description: Description of asset criticality
        isActive:
          type: boolean
          description: Identifies if asset is currently in use
        manufacturerName:
          type: string
          description: Name of asset manufacturer
        modelName:
          type: string
          description: Name of asset model
        serialNumber:
          type: string
          description: Serial number or barcode
        activatedAt:
          type: string
          format: date-time
          description: Time when asset was activated/enabled
        deactivatedAt:
          type: string
          format: date-time
          description: Time when asset was deactivated/disabled
        createdAt:
          type: string
          format: date-time
          description: Time when entity was created
        updatedAt:
          type: string
          format: date-time
          description: Time when entity was last modified
        deletedAt:
          type: string
          description: Time when entity was deleted/archived
          format: date-time
      required:
        - key
        - siteKey
        - name
        - isActive
        - createdAt
        - updatedAt
    LineItem:
      properties:
        key:
          description: Line item key
          type: string
        purchase_order_key:
          type: string
        entity_key:
          type: string
        entity_type:
          type: string
        storage_key:
          type: string
        description:
          type: string
        quantity:
          type: string
        value:
          type: string
        vendor_key:
          type: string
        delivery_at:
          type: string
        status:
          type: string
        number:
          type: string
        type:
          type: string
    Part:
      type: object
      x-examples: {}
      description: ''
      properties:
        key:
          type: string
          description: Unique team identifier
        siteKeys:
          type: array
          description: 'Identifiers of sites, which part belongs to'
          items:
            type: string
        parentKeys:
          type: string
          description: 'Identifier of assemblies, which part belongs to'
        vendorKeys:
          type: string
          description: 'Identifiers of vendors, supplying the part'
        documentKeys:
          type: array
          description: List of identifiers of documents related to part
          items:
            type: string
        code:
          type: string
          description: 'Identifier of part in end-users internal taxonomy, e. g. SFI Code or SKU'
        isAssembly:
          type: boolean
          description: Identifies if part is an assembly (contains nested parts)
        partNumber:
          type: string
          description: Part number
        name:
          type: string
          description: Name of part
        description:
          type: string
          format: text
          description: Description of part
        notes:
          type: string
          format: text
          description: Notes to part in end-user's system
        criticality:
          type: string
          description: Description of criticality
        isActive:
          type: boolean
          description: Identifies if part is currently in use
        manufacturerName:
          type: string
          description: Name of asset manufacturer
        minimumQuantity:
          type: number
          description: Minimal quanity of part
        uom:
          type: string
          description: Unit of measure
        cost:
          type: number
          description: Cost of purchase
          format: double
        currency:
          type: string
          description: Purchase currency
        createdAt:
          type: string
          description: Time when entity was created
          format: date-time
        updatedAt:
          type: string
          description: Time when entity was last modified
          format: date-time
        deletedAt:
          type: string
          description: Time when entity was deleted/archived
          format: date-time
        inventory:
          type: array
          items: {}
        drawings:
          type: array
          items: {}
      required:
        - key
        - siteKeys
        - isAssembly
        - partNumber
        - name
        - isActive
        - uom
    PurchaseOrder:
      type: object
      properties:
        key:
          description: Purchase order key
          type: string
        siteKey:
          type: string
        vendorKey:
          type: string
        orderNo:
          type: string
        orderDate:
          type: string
          format: date
        status:
          type: string
        warehouseName:
          type: string
        title:
          type: string
        description:
          type: string
        dueAt:
          type: string
          format: date-time
        approvedAt:
          type: string
          format: date-time
        completedAt:
          type: string
          format: date-time
        shippingMethod:
          type: string
        terms:
          type: string
          format: text
        notes:
          type: string
          format: text
        deliveryAddress:
          type: string
          format: address
        currency:
          type: string
        totalNetValue:
          type: number
          format: float
        totalTaxValue:
          type: number
          format: float
        totalGrossValue:
          type: number
          format: float
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        lines:
          type: array
          items: {}
      required:
        - key
        - createdAt
        - updatedAt
    Site:
      type: object
      properties:
        key:
          description: Site key
          type: string
        name:
          description: Site name
          type: string
        lat:
          type: number
          format: double
          description: Site location latitude
        lng:
          type: number
          description: Site location longitude
          format: double
        address:
          type: string
          description: Site address
        properties:
          type: string
          description: 'Key-value map for additional properties, e. g. IMO number'
        notes:
          type: string
          format: text
          description: Notes to asset in end-user's system
        createdAt:
          description: Time when entity was created
          format: date-time
          type: string
        updatedAt:
          type: string
          format: date-time
          description: Time when entity was last modified
        deletedAt:
          type: string
          format: date-time
          description: Time when entity was deleted/archived
      required:
        - key
        - name
        - createdAt
        - updatedAt
    Vendor:
      type: object
      properties:
        key:
          description: Vendor key
          type: string
        name:
          type: string
          description: Vendor name
        short_name:
          type: string
        active:
          type: string
        vendor_contacts:
          type: array
          items:
            $ref: '#/components/schemas/VendorContact'
        address:
          type: string
        city:
          type: string
        state:
          type: string
        postcode:
          type: string
        country:
          type: string
    VendorContact:
      properties:
        first_name:
          type: string
        middle_name:
          type: string
        last_name:
          type: string
        phone_numbers:
          type: string
        emails:
          type: string
    WorkOrder:
      type: object
      properties:
        key:
          description: Work order key
          type: string
        siteKey:
          description: Equipment key
          type: string
        assetKey:
          type: string
        workRequestKey:
          type: string
        pmKey:
          type: string
        teamKey:
          type: string
        userAssignedKey:
          type: string
          format: date-time
        userCompletedKey:
          type: string
          format: date-time
        title:
          type: string
          format: text
        description:
          type: string
        instructions:
          type: string
          format: text
        status:
          type: string
        severity:
          type: string
        estimatedTime:
          type: integer
        roleName:
          type: string
        categoryName:
          type: string
        documentKey:
          type: string
        documentPage:
          type: string
        notes:
          type: string
          format: text
        approvedAt:
          type: string
          format: date-time
        dueAt:
          type: string
          format: date-time
        scheduledAt:
          type: string
          format: date-time
        completedAt:
          type: string
          format: date-time
        completionRemarks:
          type: string
          format: text
        parts:
          type: array
          items: {}
        createdAt:
          type: string
          format: date-time
          description: Time when entity was created
        updatedAt:
          type: string
          format: date-time
          description: Time when entity was last modified
        deletedAt:
          type: string
          format: date-time
          description: Time when entity was deleted/archived
      required:
        - key
        - siteKey
        - assetKey
        - title
        - status
        - scheduledAt
        - createdAt
        - updatedAt
    PM:
      title: PreventiveMaintenance
      x-stoplight:
        id: k4tri9krv6784
      type: object
      properties:
        key:
          type: string
        siteKeys:
          type: string
        assetKeys:
          type: string
        teamKey:
          type: string
        title:
          type: string
        description:
          type: string
        instructions:
          type: string
        status:
          type: string
        severity:
          type: string
        estimatedTime:
          type: string
        roleName:
          type: string
        categoryName:
          type: string
        documentKey:
          type: string
        documentPage:
          type: string
        notes:
          type: string
          description: Notes to asset in end-user's system
          format: text
        dueAt:
          type: string
          format: date-time
        nextScheduledAt:
          type: string
        lastScheduledAt:
          type: string
        lastCompletedAt:
          type: string
        lastCompletionRemarks:
          type: string
          format: text
        parts:
          type: array
          items: {}
        triggers:
          type: array
          items: {}
        createdAt:
          type: string
          format: date-time
          description: Time when entity was created
        updatedAt:
          type: string
          format: date-time
          description: Time when entity was created
        deletedAt:
          type: string
          format: date-time
          description: Time when entity was deleted/archived
      required:
        - key
        - siteKeys
        - assetKeys
        - title
    AssetDowntime:
      title: AssetDowntime
      x-stoplight:
        id: ohrkom3gil8m5
      type: object
      properties:
        key:
          type: string
          description: Unique asset identifier
        assetKey:
          type: string
          description: 'Identifier of site, which asset belongs to'
        description:
          type: string
          description: Downtime reason
        startedAt:
          type: string
          format: date-time
          description: Downtime start time
        endedAt:
          type: string
          format: date-time
          description: Downtime end time
        categoryName:
          type: string
          description: Downtime category description
        severity:
          type: string
          description: Downtime severity description
        notes:
          type: string
          format: text
          description: Notes in end-user's system
        createdAt:
          type: string
          description: Time when entity was created
          format: date-time
        updatedAt:
          type: string
          description: Time when entity was last modified
          format: date-time
      required:
        - key
        - assetKey
        - description
        - startedAt
        - endedAt
        - createdAt
        - updatedAt
    Model:
      title: Model
      x-stoplight:
        id: d4srrmmj6n800
      type: object
      properties:
        key:
          type: string
          description: Unique model identifier
        siteKey:
          type: string
          description: 'Identifier of site, which model belongs to'
        documentKeys:
          type: array
          description: List of identifiers of documents related to model
          items: {}
        name:
          type: string
          description: Model name
        manufacturerName:
          type: string
          description: Name of model manufacturer
        createdAt:
          type: string
          format: date-time
          description: Time when entity was created
        updatedAt:
          type: string
          format: date-time
          description: Time when entity was last modified
        deletedAt:
          type: string
          format: date-time
          description: Time when entity was deleted/archived
      required:
        - key
        - name
        - updatedAt
        - deletedAt
    Counter:
      title: Counter
      x-stoplight:
        id: 8tg0vgbjlplsy
      type: object
      properties:
        key:
          type: string
          description: Unique counter identifier
        assetKey:
          type: string
          description: 'Identifier of asset, which counter belongs to'
        siteKey:
          type: string
          description: 'Identifier of site, which counter belongs to'
        name:
          type: string
          description: Name of counter
        uom:
          type: string
          description: Unit of measure
        lastReading:
          type: string
          description: Value of counter
        lastReadingAt:
          type: string
          format: date-time
          description: Time when last reading was updated
        createdAt:
          type: string
          format: date-time
          description: Time when entity was created
        updatedAt:
          type: string
          format: date-time
          description: Time when entity was last modified
        deletedAt:
          type: string
          format: date-time
          description: Time when entity was deleted/archived
      required:
        - key
        - assetKey
        - name
        - uom
        - createdAt
        - updatedAt
    CounterReading:
      title: CounterReading
      x-stoplight:
        id: n5zva0shvm8is
      type: object
      properties:
        key:
          type: string
          description: Unique counter identifier
        assetKey:
          type: string
          description: 'Identifier of asset, which counter belongs to'
        counterKey:
          type: string
          description: 'Identifier of counter, which reading belongs to'
        reading:
          type: string
          description: Value of counter
        createdAt:
          type: string
          format: date-time
          description: Time when entity was created
      required:
        - key
    Team:
      title: Team
      x-stoplight:
        id: d71bsbivzgftd
      type: object
      properties:
        key:
          type: string
          description: Unique team identifier
        code:
          type: string
          description: 'Identifier of part in end-users internal taxonomy, e. g. SFI Code or SKU'
        name:
          type: string
          description: Name of team
        description:
          type: string
          description: Description of team
          format: text
        createdAt:
          type: string
          format: date-time
          description: Time when entity was created
        updatedAt:
          type: string
          format: date-time
          description: Time when entity was last modified
        deletedAt:
          type: string
          description: Time when entity was deleted/archived
      required:
        - key
        - name
        - description
        - createdAt
        - updatedAt
  responses:
    AssetResourceCollection:
      description: Assets list
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Asset'
    AssetResourceItem:
      description: Asset entity
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Asset'
    LineItemResourceCollection:
      description: Line Item list
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/LineItem'
    LineItemResourceItem:
      description: Line Item entity
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/LineItem'
    PartResourceCollection:
      description: Part list
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Part'
    PartResourceItem:
      description: Part entity
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Part'
    SiteResourceCollection:
      description: Site list
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Site'
    SiteResourceItem:
      description: Site entity
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Site'
    VendorResourceCollection:
      description: Vendor list
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Vendor'
    VendorResourceItem:
      description: Vendor entity
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Vendor'
    WorkOrderResourceCollection:
      description: Work order list
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/WorkOrder'
    WorkOrderResourceItem:
      description: Work order entity
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/WorkOrder'
  securitySchemes:
    oauth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: 'https://api.makini.io/link/oauth/authorize'
          tokenUrl: 'https://api.makini.io/link/oauth/token'
          scopes: {}
security:
  - oauth2: []
servers:
  - url: 'https://api.makini.io'
    description: ''
